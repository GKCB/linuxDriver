
## Linux驱动开发

运行环境：`S3C2440开发板`  

### 目录  

第一章 [Linux驱动开发概述](#linux驱动开发概述)  






### Linux驱动开发概述  

设备驱动概述：是一个允许计算机软件与硬件交互的程序。  

设备驱动的分类  
1.字符设备    
2.块设备  
3.网络设备  

1.字符设备  
字符设备可以一个个字节读取数据的设备，LED 键盘 和鼠标。字符设备的驱动层要有open、close、read、write、ioctl函数。文件系统中有相关函数会调用这些函数。内核中对字符设备有对应的文件：`/dev/console`。字符设备不一定支持寻址。寻址：对硬件中的寄存器进行随机访问。不支持以为这使能对硬件寄存器进行顺序读取。读取了寄存器的数据之后，程序自己确定用那些数据。  

2.块设备  
类似磁盘，但是一次是一个或者多个块进行操作的。  

3.网络设备  
操作网络设备。  

用户控件只有应用程序和系统调用两部分。只有系统调用才能访问硬件设备。  

模块机制  
模块是运行时加入内核的代码。类似Windows中的DLL文件。  
按照装载的方式分为两种：如果是内核启动时装载就是`静态装载`，内核已经运行时称为`动态装载`。  

驱动模块基本架构：  
```c{.line-numbers}
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/init.h>

int __init xxx_init(void)
{
    //模块加载时的初始化工作
    return 0;
}

void __exit xxx_exit(void)
{
    //模块卸载时销毁工作    
}
module_init(xxx_init);  //指定初始化函数的宏
module_exit(xxx_exit);  //指定卸载函数的宏
```

需要的技能点：  
1.C语言基础  
2.可以理解芯片手册上面的设备配置  
3.内核源码的理解  
4.多任务设计  

应用程序VS驱动程序：  
内核、驱动程序不能使用C库，C库是在用户控件实现。  
驱动开发要用的是GNU C  
内核支持[异步中断](https://blog.csdn.net/jasonLee_lijiaqi/article/details/80181814)  


返回: [目录](#目录)  

